[gd_scene load_steps=3 format=3 uid="uid://c2j8dpl24jvt3"]

[sub_resource type="GDScript" id="GDScript_f5mdp"]
script/source = "extends Area2D
#intended to be instantiated by the authority only

@export var damage:float = 35
@export var inflictor:String = \"\"
@export var team:int = -1

func _on_area_entered(area: Area2D) -> void:
	if area.get_parent() is Entity:
		var e = area.get_parent() as Entity
		if team < 0 or e.team != team:
			e.changeHealth.rpc(e.health, -damage, inflictor)

func _on_linger_timeout() -> void:
	queue_free()
"

[sub_resource type="CircleShape2D" id="CircleShape2D_454ul"]
radius = 1.0

[node name="AoeDmg" type="Area2D"]
script = SubResource("GDScript_f5mdp")

[node name="linger" type="Timer" parent="."]
wait_time = 0.2
one_shot = true
autostart = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_454ul")

[connection signal="area_entered" from="." to="." method="_on_area_entered"]
[connection signal="timeout" from="linger" to="." method="_on_linger_timeout"]
